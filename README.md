The entire FULL MASTER DOCUMENTATION from scratch, integrating:

âœ… Updated & corrected folder layout

âœ… Full list of files with explanations

âœ… All modules (TTS, Visuals, LLM, Engines, Orchestrators, Shared Logic)

âœ… Updated architecture after LLM theme + LLM scene-spec + config loader

âœ… All JSON configs explained

âœ… Channel-specific + Global configs

âœ… Complete end-to-end pipeline

âœ… Clean Markdown structure

ğŸ“Œ No placeholder text â€” only final production-ready documentation.

I will now generate the final full Markdown documentation, ready for you to paste into:

/Users/kazirasel/VideoAutomation/System/Docs/full_system_overview.md


â¸»

ğŸš€ REGENERATED FULL SYSTEM DOCUMENTATION (MASTER VERSION)

(Copy everything below into your .md file)

â¸»



VISUAL AUTOMATION SYSTEM â€” FULL TECHNICAL MASTER DOCUMENTATION

Version 1.1 â€” Updated File Layout Edition (2025-12-06)

Author: CapitalChronicles Automation Architecture

â¸»



0. INTRODUCTION

This documentation provides the full technical blueprint of the entire VideoAutomation System, including:
	â€¢	The complete updated file layout
	â€¢	Detailed explanation of every subsystem
	â€¢	All modules and their purpose
	â€¢	LLM-powered upgrades (theme inference, scene-spec refinement)
	â€¢	Scene generation pipeline
	â€¢	TTS pipeline
	â€¢	Visual Library
	â€¢	Image generation engines
	â€¢	Orchestrators
	â€¢	Channel configuration brain system
	â€¢	Debugging guidance

This is the authoritative master reference for the architecture powering CapitalChronicles and all future channels.

â¸»



1. TOP-LEVEL SYSTEM OVERVIEW

VideoAutomation/
â”‚
â”œâ”€â”€ Channels/                     â† Per-channel brains & outputs
â”œâ”€â”€ System/                       â† Engines, planners, shared logic
â”œâ”€â”€ PutScript/                    â† Incoming scripts for auto-run
â”œâ”€â”€ ChnlCnfg/                     â† Legacy config (some channels)
â”‚
â”œâ”€â”€ StartServices.command         â† Starts watchers & engines
â”œâ”€â”€ StopServices.command
â”œâ”€â”€ StopCleanAll.command
â””â”€â”€ Resume.command

This root directory orchestrates:
	1.	Script ingestion â†’ TTS â†’ Slices â†’ Scene generation
	2.	AI image generation (Imagen4/FAL/Flux engines)
	3.	Resolve automation for final video assembly

â¸»



2. CHANNELS DIRECTORY (PER CHANNEL)

Channels/
â””â”€â”€ CapitalChronicles/
    â”œâ”€â”€ Config/
    â”œâ”€â”€ Docs/
    â””â”€â”€ Build/


â¸»

2.1 Config Folder (Channel-Level Brains)

Path:

/Users/kazirasel/VideoAutomation/Channels/CapitalChronicles/Config/

Contents:

File	Purpose
prompt_style.json	Defines scene templates, macro prompts, negative prompts
metaphor_bank.json	Maps themes â†’ metaphors â†’ allowed scenes
pacing_policy.json	Controls repetition, spacing, intensity, arc logic
entity_style.json	Defines palette, architecture, symbols for each entity
channel_policy.py (legacy â€“ archived)	Deprecated; replaced by JSON configs
style_tuner_report.json (archived)	Generated by style_tuner.py

Recommended structure:

Config/
â”œâ”€â”€ prompt_style.json
â”œâ”€â”€ metaphor_bank.json
â”œâ”€â”€ pacing_policy.json
â”œâ”€â”€ entity_style.json
â””â”€â”€ Archive/
    â”œâ”€â”€ channel_policy.py
    â””â”€â”€ style_tuner_report.json


â¸»

2.2 Docs Folder (Recommended)

Create:

Channels/CapitalChronicles/Docs/

Use for:
	â€¢	Versioned configs
	â€¢	Notes for editors
	â€¢	Visual reference guides

â¸»

2.3 Build Folder

Channels/CapitalChronicles/Build/
â”œâ”€â”€ Ready/
â”œâ”€â”€ Read/
â””â”€â”€ Temp/

Build/Ready/

This folder stores final scene outputs, one folder per job:

<DATE>/<job_id>_CC_final/
    â”œâ”€â”€ Scenes/
    â”œâ”€â”€ SceneCandidates/
    â”œâ”€â”€ manifest.json
    â”œâ”€â”€ *_scene_plan.json
    â”œâ”€â”€ *_narrative_plan.json
    â”œâ”€â”€ *_final.prompts.json
    â”œâ”€â”€ *_final.ass
    â””â”€â”€ *_final.mp4

Scenes/

Contains one JPG per slice.

SceneCandidates/

Stores multiple attempts or filtered results (future).

â¸»



3. SYSTEM DIRECTORY

Path:

/Users/kazirasel/VideoAutomation/System/

This is the core engine for:
	â€¢	TTS processing
	â€¢	Visual AI processing
	â€¢	LLM reasoning
	â€¢	Shared code
	â€¢	Config loading
	â€¢	Orchestration

â¸»



4. TTS SYSTEM (SysTTS)

Path:

System/SysTTS/

Contents:

File	Function
watcher.py	Observes PutScript folder, triggers TTS jobs
tts_batch.py	Batch TTS generation for the full script
run_tts_once.py	Single-run TTS engine
whisper_transcribe.py	Transcription from audio (if needed)
using/	Working directory
InitialAudio/	Raw output audio
Subtitles/	Whisper-generated or timed subtitles
EngineTTS/	AI voice engines

This subsystem produces:
	â€¢	Final WAV
	â€¢	Subtitles (ASS)
	â€¢	Whisper transcripts

â¸»



5. VISUAL SYSTEM (SysVisuals)

Path:

System/SysVisuals/

Contains ALL components for scene generation:

ImgToVL/              â† CLIP scanning + importing into visual library
VisualLibrary/        â† Pre-curated robust image pool
Config/               â† Global configs
Engines/              â† Image engines + Resolve importer
Orchestrators/        â† Execution managers
Tools/                â† scene_gen.py + helpers
Shared/               â† Core logic modules
LLM/                  â† Prompts + inference helpers


â¸»



6. SysVisuals/Config (GLOBAL CONFIG)

Path:

System/SysVisuals/Config/

Files:

File	Purpose
pipeline.json	Global pipeline flags (enable/disable engines)
subtitle_style.json	Defines global caption styling
default_prompt_style.json	Base prompt style for SceneEngine fallback


â¸»



7. SysVisuals/Engines/image (AI IMAGE GENERATORS)

Path:

System/SysVisuals/Engines/image/

Contains all AI image backends.

File	Description
ai_engine.py	Universal wrapper for image generation
imagen4_ai_engine.py	Google Imagen4 Fast / Pro integration
fal_ai_engine.py	FAL.AI Flux engines
image_pipeline.py	Pre-processing + post-processing
clip_utils.py	CLIP scoring for semantic filtering (future)


â¸»



8. SysVisuals/Engines/importer (Resolve Automation)

Path:

System/SysVisuals/Engines/importer/resolve_engine.py

Controls:
	â€¢	Automatic project creation
	â€¢	Timeline setup
	â€¢	Scene import
	â€¢	Video export

â¸»



9. SysVisuals/Orchestrators

Path:

System/SysVisuals/Orchestrators/

File	Purpose
scene_orchestrator.py	Runs scene generation jobs
import_orchestrator.py	Moves scenes into Resolve
video_orchestrator.py	End-to-end assembly and export


â¸»



10. SysVisuals/Tools (User-Facing Utilities)

Path:

System/SysVisuals/Tools/

Key files:

File	Purpose
scene_gen.py	MAIN SCENE GENERATOR (LLM + planners + engine)
auto_on_job.py	Automates job processing
run_visual_once.py	Generates visuals for a single script
visual_library.py	Add/check images in VisualLibrary
style_tuner.py	Tunes prompt styles from batch test
weekly_cleanup.py	Clears old scenes, caches
setup_folders.py	Initializes folder structure


â¸»



11. SysVisuals/Shared (CORE LOGIC)

Path:

System/SysVisuals/Shared/

This folder contains the intelligent multi-layer system that powers the whole visual pipeline.

â¸»

11.1 slices.py

Builds time-slices depending on schedule (5s / 7s / 9s etc).
Output: List of SliceDef objects with t0/t1 and text assigned.

â¸»

11.2 paths.py

Generates all file paths for build folders, scenes, and manifests.

â¸»

11.3 concept_extractor.py

Extracts:
	â€¢	Key concepts
	â€¢	Entities
	â€¢	Tone
	â€¢	Financial objects
	â€¢	Basic theme hints

Used to enrich final prompts.

â¸»

11.4 narrative_planner.py

Produces *_narrative_plan.json
Detects:
	â€¢	Chapters
	â€¢	Entities
	â€¢	Global themes
	â€¢	Recurring structures

â¸»

11.5 scene_planner.py

THE MOST IMPORTANT MODULE.

Combines:

âœ” Built-in heuristics

âœ” LLM Theme Inference (llm_theme_inference.py)

âœ” LLM Scene-Spec Refinement (llm_scene_spec_refiner.py)

âœ” pacing_policy.json enforcement

âœ” metaphor_bank.json mapping

âœ” entity_style.json enrichment

Output: *_scene_plan.json
Each slice gets a SceneSpec with:
	â€¢	scene_type
	â€¢	metaphor
	â€¢	era
	â€¢	camera
	â€¢	chart_usage
	â€¢	entity_palette
	â€¢	avoid lists
	â€¢	scale
	â€¢	final LLM-refined structure

â¸»

11.6 scene_engine.py

Transforms SceneSpec â†’ final Imagen prompt.

Handles:
	â€¢	template selection
	â€¢	negative prompt injection
	â€¢	entity style embedding
	â€¢	chart decisions
	â€¢	fallback logic

Very stable and predictable.

â¸»

11.7 prompt_style.py

Applies channel-specific prompt style JSON.

â¸»

11.8 config_loader.py

Loads all per-channel/global configs in correct precedence order:
	1.	Channel configs
	2.	Global defaults
	3.	Fallback defaults

â¸»

11.9 llm_theme_inference.py

Asks LLM to classify each slice by theme.

â¸»

11.10 llm_scene_spec_refiner.py

Asks LLM to refine the heuristic SceneSpec into:
	â€¢	More accurate metaphor usage
	â€¢	Better historical/financial relevance
	â€¢	Camera + composition suggestions
	â€¢	Accurate chart style selection

â¸»



12. FULL SCENE GENERATION PIPELINE

Below is the end-to-end flow executed by scene_gen.py.

SCRIPT (.txt)
    â”‚
    â–¼
TTS â†’ WAV â†’ duration
    â”‚
    â–¼
slices.py â†’ [SliceDef list]
    â”‚
    â–¼
Assign slice_text to each slice
    â”‚
    â–¼
NarrativePlanner â†’ *_narrative_plan.json
    â”‚
    â–¼
ScenePlanner â†’
    Heuristics +
    LLM theme inference +
    LLM scene-spec refinement +
    pacing_policy +
    metaphor_bank +
    entity_style
 â†’ *_scene_plan.json
    â”‚
    â–¼
SceneEngine.build_prompt()
    â”‚
    â–¼
AIImageEngine (Imagen4/FAL)
    â”‚
    â–¼
scene_001.jpg â€¦ scene_nnn.jpg
    â”‚
    â–¼
manifest.json
    â”‚
    â–¼
Resolve Automation
    â”‚
    â–¼
FINAL VIDEO (.mp4)


â¸»



13. DEBUG FILES GENERATED

Inside each job folder:

File	Purpose
Scenes/*.jpg	Scene images
SceneCandidates/	Alternative scenes
_scene_plan.json	LLM-guided SceneSpec plan
_narrative_plan.json	Chapter/entity/theme analysis
_final.prompts.json	Prompts actually sent to the AI
manifest.json	Scene â†’ slice â†’ file mapping
_final.ass	Subtitle file
_final.mp4	Rendered video


â¸»



14. FUTURE ENHANCEMENTS RECOMMENDED

ğŸ”¹ CLIP-based scene validator

Ensures 100% semantic correctness.

ğŸ”¹ Multi-image candidate ranking

Generate 3â€“4 images per slice â†’ pick best.

ğŸ”¹ Per-channel LLM personality

Different channels can have different visual language.

ğŸ”¹ Scene memory

Maintain consistency over a full 60m episode.

â¸»



15. CONCLUSION

You now have:

âœ” Full regenerated documentation
âœ” Full updated file layout
âœ” Detailed explanation of every module
âœ” Accurate reflection of your actual filesystem
âœ” Support for your new LLM-driven architecture
âœ” A future-proof system that scales to 1000+ videos

This documentation is complete and ready to be saved to:

/Users/kazirasel/VideoAutomation/System/Docs/full_system_overview.md
